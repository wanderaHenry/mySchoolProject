doctype html
html(lang="en")
  head
    meta(charset="UTF-8")
    meta(name="viewport", content="width=device-width, initial-scale=1.0")
    title Farmer Dashboard
    link(href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet")
    link(rel="stylesheet", href="/style.css")

  body(data-page="dashboard")
    .container-fluid
      .row
        // Sidebar
        .col-md-3.col-lg-2.sidebar
          h5.mb-4 #{user.name}
            br
            small.text-muted Farmer
          a.active(href="/dashboard") Dashboard
          a(href="/products") Products
          a(href="/orders") Orders
          a(href="/messages") Messages
          a(href="/settings") Settings

        // Main Content
        .col-md-9.col-lg-10.dashboard-content
          h4.text-center Hello #{user.name}, this is your dashboard!

          // Stats
          .row.mb-4
            .col-md-4
              .card.p-3.shadow-sm
                h6 Total Sales
                h4 $#{totalSales}
            .col-md-4
              .card.p-3.shadow-sm
                h6 Number of Orders
                h4 #{numberOfOrders}
            .col-md-4
              .card.p-3.shadow-sm
                h6 Average Order Value
                h4 $#{avgOrderValue}

          // Upcoming Orders
          h5.mb-3 Upcoming Orders
          if orders.length > 0
            table.table.table-bordered.bg-white.shadow-sm
              thead
                tr
                  th Order ID
                  th Customer
                  th Date
                  th Status
                  th Total
              tbody
                each order, i in orders
                  tr
                    td #{order._id}
                    td #{order.customerName}
                    td #{order.createdAt.toDateString()}
                    td
                      if order.status === 'Pending'
                        span.status-badge.status-pending Pending
                      else if order.status === 'Confirmed'
                        span.status-badge.status-confirmed Confirmed
                      else if order.status === 'Shipped'
                        span.status-badge.status-shipped Shipped
                      else
                        span.status-badge.status-declined Declined
                    td $#{order.total}
          else
            p.text-muted No upcoming orders.

          // Upload Product Form
          h5.mt-5.mb-3 Upload New Product
          form#productForm.bg-white.p-4.shadow-sm.rounded(action="/products/create" method="POST" enctype="multipart/form-data")
            .mb-3
              label.form-label(for="productName") Product Name
              input#productName.form-control(type="text", name="name", placeholder="e.g. Organic Tomatoes", required)
            .mb-3
              label.form-label(for="productDesc") Description
              textarea#productDesc.form-control(name="description", rows="3", required)
            .mb-3
              label.form-label(for="productPrice") Price
              input#productPrice.form-control(type="number", step="0.01", name="price", placeholder="$0.00", required)
            .mb-3
              label.form-label(for="productImage") Upload Product Image
              input#productImage.form-control(type="file", name="image", required)
            button.btn.btn-success(type="submit") Upload Product

    script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js")
